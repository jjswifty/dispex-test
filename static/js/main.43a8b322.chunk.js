(this.webpackJsonpdispex=this.webpackJsonpdispex||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),s=n.n(c),i=n(14),u=n(43),o=n(10),p=n(8),l=n.n(p),j=n(13),d=n(22),b=function e(t){Object(d.a)(this,e),this.instance=t.instance,this.instance.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"),e}),(function(e){Promise.reject(e)}))},f=n(33),h=n(32),O="https://dispex.org/api/vtest",m=n(68),v=n.n(m),x=function e(t){Object(d.a)(this,e),this.instance=v.a.create({baseURL:t,headers:{"Content-Type":"application/json"}})},g=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getManagementCompanies=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/Request/companies",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getStreets=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/Request/streets",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),y=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getClients=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/HousingStock/client",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addClient=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.post("/HousingStock/client",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteClient=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.delete("/HousingStock/bind_client/".concat(n));case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),C=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getApartments=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/HousingStock",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),S="GET_COMPANIES",w="SET_APARTMENTS",E="SET_APARTMENTS_FETCHING",N="SET_STREETS_FETCHING",T="SET_IS_STREETS_FETCHED",I="SET_IS_APARTMENTS_FETCHED",k={streets:[],apartments:[],isApartmentsFetching:!1,isStreetsFetching:!1,isApartmentsFetched:!1,isStreetsFetched:!1},A=function(e){return{type:N,boolean:e}},_=function(e){return{type:E,boolean:e}},F=function(e){return{type:S,streets:e}},R=function(e){return{type:w,apartments:e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(o.a)(Object(o.a)({},e),{},{streets:t.streets});case w:return Object(o.a)(Object(o.a)({},e),{},{apartments:t.apartments});case E:return Object(o.a)(Object(o.a)({},e),{},{isApartmentsFetching:t.boolean});case N:return Object(o.a)(Object(o.a)({},e),{},{isStreetsFetching:t.boolean});case T:return Object(o.a)(Object(o.a)({},e),{},{isStreetsFetched:t.boolean});case I:return Object(o.a)(Object(o.a)({},e),{},{isApartmentsFetched:t.boolean});default:return e}},M=n(140),P=n(147),D=n(146),L="SET_COMPANIES",G="SET_SELECTED_COMPANY",z="SET_SELECTED_COMPANY_NAME",J="SET_IS_COMPANY_SELECTED",q="TOGGLE_FETCHING",B={companies:[],selectedCompany:null,selectedCompanyName:"",isCompanySelected:!1,isFetching:!1},K=function(){return{type:q}},V=function(e){return{type:L,companies:e}},W=function(e){return{type:J,isCompanySelected:e}},Y=function(e,t){return function(n){var r;n((r=Number(e),{type:G,selectedCompany:r})),n({type:z,selectedCompanyName:t}),n(W(!0))}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(o.a)(Object(o.a)({},e),{},{companies:t.companies});case G:return Object(o.a)(Object(o.a)({},e),{},{selectedCompany:t.selectedCompany});case z:return Object(o.a)(Object(o.a)({},e),{},{selectedCompanyName:t.selectedCompanyName});case J:return Object(o.a)(Object(o.a)({},e),{},{isCompanySelected:t.isCompanySelected});case q:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!e.isFetching});default:return e}},X=n(20),Q=n(143),Z=n(145),$=n(3),ee=Object(M.a)({root:{listStyleType:"none"},card:{width:250,height:130,display:"flex",flexDirection:"column",textAlign:"center",margin:2,alignItems:"center",justifyContent:"center"},btn:{width:"90%",fontSize:12,marginTop:5}}),te=function(e){var t=ee(),n=Object(r.useState)(!1),a=Object(X.a)(n,2),c=a[0],s=a[1],i=function(){var t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.deleteClient(e.client.bindId);case 2:s(!0);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return!c&&Object($.jsx)("li",{className:t.root,children:Object($.jsx)(Q.a,{className:t.card,children:Object($.jsxs)(Z.a,{children:[Object($.jsx)(D.a,{variant:"inherit",children:"\u0416\u0438\u043b\u0435\u0446 ".concat(e.client.name,",")}),Object($.jsx)(D.a,{variant:"inherit",children:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d ".concat(e.client.phone)}),Object($.jsx)(P.a,{className:t.btn,onClick:i,color:"secondary",variant:"contained",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"})]})})})},ne=n(154),re=Object(M.a)({clients:{display:"flex",flexDirection:"row",flexWrap:"wrap"},btn:{fontSize:12,margin:5},input:{width:140,margin:5}}),ae=function(e){var t=re(),n=[],a=Object(r.useState)(""),c=Object(X.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(""),o=Object(X.a)(u,2),p=o[0],d=o[1],b=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s,p),e.next=3,y.addClient({name:s,phone:p});case 3:t=e.sent,n.push({bindId:t.id,name:s,phone:p});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)("ul",{children:[Object($.jsxs)("div",{children:[Object($.jsx)(D.a,{children:"\u0416\u0438\u043b\u044c\u0446\u044b"}),Object($.jsx)("div",{className:t.clients,children:e.apartment.clients.length>0?e.apartment.clients.map((function(t,n){return Object($.jsx)("div",{children:Object($.jsx)(te,{client:t,apartment:e.apartment})},t.bindId)})):Object($.jsx)(D.a,{variant:"subtitle2",children:"- \u0416\u0438\u043b\u044c\u0446\u043e\u0432 \u043d\u0435\u0442"})})]}),Object($.jsxs)("div",{className:t.inputs,children:[Object($.jsx)(ne.a,{className:t.input,value:s,onInput:function(e){return i(e.target.value)},placeholder:"\u0438\u043c\u044f"}),Object($.jsx)(ne.a,{className:t.input,onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},value:p,onInput:function(e){return d(String(e.target.value))},placeholder:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),Object($.jsx)(P.a,{onClick:b,disabled:!s||!p,className:t.btn,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"})]})]})},ce=function(e){var t=Object(r.useState)(!1),n=Object(X.a)(t,2),a=n[0],c=n[1];return Object($.jsxs)("ul",{children:[Object($.jsxs)(P.a,{size:"small",variant:"outlined",style:{margin:"2px"},onClick:function(){c(!a)},children:["\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430 ",e.index]}),a&&Object($.jsx)(ae,{apartment:e.apartment})]})},se=function(e){var t=0;return e.apartments.map((function(e){return t++,Object($.jsx)(ce,{apartment:e,index:t},e.addressId)}))},ie=function(e){var t=Object(r.useState)(!1),n=Object(X.a)(t,2),a=n[0],c=n[1];return Object($.jsxs)("li",{children:[Object($.jsxs)(P.a,{size:"medium",variant:"outlined",onClick:function(){c(!a)},style:{margin:"2px"},children:["\u0414\u043e\u043c ",e.houseNumber]}),a&&e.streetHouses.map((function(e,t){return Object($.jsx)(se,{apartments:Object.values(e)},t)}))]})},ue=function(e){return e.streetHousesKeys.map((function(t){return Object($.jsx)(ie,{houseNumber:t,streetHouses:e.streetHouses},t)}))},oe=Object(M.a)({button:{margin:3}}),pe=function(e){var t=oe(),n=e.street,a=Object.keys(n.houses),c=Object(r.useState)(!1),s=Object(X.a)(c,2),i=s[0],u=s[1];return 0!==a.length&&Object($.jsxs)("div",{children:[Object($.jsx)(P.a,{variant:"outlined",className:t.button,onClick:function(){u(!i)},children:n.name}),Object($.jsx)("div",{children:i&&Object($.jsx)("div",{children:Object($.jsx)("ul",{children:Object($.jsx)(ue,{streetHousesKeys:a,streetHouses:Object.values(n.houses)})})})})]},n.id)},le=function(e){var t=e.streets;return t&&t.map((function(e){return Object($.jsx)(pe,{street:e},e.id)}))},je=Object(M.a)({root:{height:"100%",maxWidth:"100%",paddingLeft:10}}),de=function(e){var t=Object(i.b)(),n=je(),a=e.selectedCompanyId,c=Object(i.c)((function(e){return e.apartmentsReducer.isApartmentsFetching})),s=Object(i.c)((function(e){return e.apartmentsReducer.isStreetsFetching})),p=Object(i.c)((function(e){return e.apartmentsReducer.apartments})),d=Object(i.c)((function(e){return e.apartmentsReducer.streets})),b=Object(i.c)((function(e){return e.companiesReducer.selectedCompanyName})),f=c||s;Object(r.useEffect)((function(){var e;t((e=a,function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0)),t.prev=1,t.next=4,C.getApartments({companyId:e});case 4:r=t.sent,n(R(r)),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:return t.prev=11,n(_(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,a]);f||d.forEach((function(e){var t=p.filter((function(t){return t.streetId===e.id})),n={};t.forEach((function(e){n[e.houseId]=Object(o.a)(Object(o.a)({},n[e.houseId]),{},Object(u.a)({},e.addressId,e))})),e.houses=n}));return Object($.jsxs)("div",{className:n.root,children:[Object($.jsx)(P.a,{variant:"contained",color:"primary",onClick:function(){return t(W(!1))},disabled:f,children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0432\u044b\u0431\u043e\u0440\u0443"}),Object($.jsxs)(D.a,{variant:"subtitle1",children:["\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f ",b]}),Object($.jsxs)(D.a,{variant:"subtitle2",children:[b," \u0438\u043c\u0435\u0435\u0442 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u043b\u0438\u0446\u0430\u0445: (\u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0447\u0442\u043e-\u0431\u044b \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u043e \u0432\u0441\u0435 \u0443\u043b\u0438\u0446\u044b, \u043c\u043d\u043e\u0433\u043e \u043f\u0443\u0441\u0442\u044b\u0445)"]}),f?Object($.jsx)(D.a,{variant:"subtitle1",children:"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."}):Object($.jsx)(le,{streets:d})]})},be=n(150),fe=n(156),he=n(153),Oe=n(157),me=Object(M.a)({root:{margin:0,padding:0,width:"100%",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},formControl:{minWidth:250}}),ve=function(e){var t=Object(i.b)(),n=me(),a=Object(i.c)((function(e){return e.companiesReducer.companies}));Object(r.useEffect)((function(){t(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(K()),e.prev=1,e.next=4,g.getManagementCompanies();case 4:n=e.sent,t(V(n)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:return e.prev=11,t(K()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}),[t]);return Object($.jsx)("div",{className:n.root,children:Object($.jsxs)(be.a,{className:n.formControl,children:[Object($.jsx)(fe.a,{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),Object($.jsx)(he.a,{onChange:function(e){return function(e){var n=e.id,r=e.name;t(Y(n,r))}(e.target.value)},defaultValue:"",children:a&&a.map((function(e){return Object($.jsx)(Oe.a,{value:{id:e.id,name:e.name},children:e.name},e.id)}))})]})})},xe=n(74),ge=n(151),ye=n(152),Ce=Object(xe.a)({palette:{type:"dark"},typography:{allVariants:{color:"white"}}}),Se=Object(M.a)({root:{margin:0,padding:0,width:"100%",minHeight:"100vh"}}),we=function(){var e=Se(),t=Object(i.b)();Object(r.useEffect)((function(){t(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A(!0)),e.prev=1,e.next=4,g.getStreets();case 4:n=e.sent,t(F(n)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:return e.prev=11,t(A(!1)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}),[t]);var n=Object(i.c)((function(e){return e.companiesReducer.isCompanySelected})),a=Object(i.c)((function(e){return e.companiesReducer.selectedCompany}));return Object($.jsxs)(ge.a,{theme:Ce,children:[Object($.jsx)(ye.a,{}),Object($.jsx)("div",{className:e.root,children:n?Object($.jsx)(de,{selectedCompanyId:a}):Object($.jsx)(ve,{})})]})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Ne=n(51),Te=n(73),Ie=Object(Ne.b)({apartmentsReducer:H,companiesReducer:U}),ke=Object(Ne.c)(Ie,Object(Ne.a)(Te.a));window.store=ke;var Ae=ke;s.a.render(Object($.jsx)(a.a.StrictMode,{children:Object($.jsx)(i.a,{store:Ae,children:Object($.jsx)(we,{})})}),document.getElementById("root")),Ee()}},[[111,1,2]]]);
//# sourceMappingURL=main.43a8b322.chunk.js.map