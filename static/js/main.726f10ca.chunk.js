(this.webpackJsonpdispex=this.webpackJsonpdispex||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),s=n.n(c),i=n(14),u=n(43),o=n(12),p=n(8),l=n.n(p),j=n(13),d=n(22),b=function e(t){Object(d.a)(this,e),this.instance=t.instance,this.instance.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"),e}),(function(e){Promise.reject(e)}))},f=n(34),h=n(32),O="https://dispex.org/api/vtest",m=n(68),v=n.n(m),x=function e(t){Object(d.a)(this,e),this.instance=v.a.create({baseURL:t,headers:{"Content-Type":"application/json"}})},g=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getManagementCompanies=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/Request/companies",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getStreets=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/Request/streets",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),y=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getClients=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/HousingStock/client",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addClient=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.post("/HousingStock/client",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteClient=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.delete("/HousingStock/bind_client/".concat(n));case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),C=new(function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getApartments=function(){var t=Object(j.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.get("/HousingStock",{params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(b))(new x(O)),w="GET_COMPANIES",S="SET_APARTMENTS",E="SET_APARTMENTS_FETCHING",N="SET_STREETS_FETCHING",k="SET_IS_STREETS_FETCHED",I={streets:[],isApartmentsFetching:!1,isStreetsFetching:!1,apartments:[],isStreetsFetched:!1},T=function(e){return{type:N,boolean:e}},A=function(e){return{type:E,boolean:e}},F=function(e){return{type:w,streets:e}},_=function(e){return{type:S,apartments:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(o.a)(Object(o.a)({},e),{},{streets:t.streets});case S:return Object(o.a)(Object(o.a)({},e),{},{apartments:t.apartments});case E:return Object(o.a)(Object(o.a)({},e),{},{isApartmentsFetching:t.boolean});case N:return Object(o.a)(Object(o.a)({},e),{},{isStreetsFetching:t.boolean});case k:return Object(o.a)(Object(o.a)({},e),{},{isStreetsFetched:t.boolean});default:return e}},H=n(140),M=n(147),P=n(146),D="SET_COMPANIES",L="SET_SELECTED_COMPANY",G="SET_SELECTED_COMPANY_NAME",z="SET_IS_COMPANY_SELECTED",J="TOGGLE_FETCHING",q={companies:[],selectedCompany:null,selectedCompanyName:"",isCompanySelected:!1,isFetching:!1},B=function(){return{type:J}},K=function(e){return{type:D,companies:e}},V=function(e){return{type:z,isCompanySelected:e}},W=function(e,t){return function(n){var r;n((r=Number(e),{type:L,selectedCompany:r})),n({type:G,selectedCompanyName:t}),n(V(!0))}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(o.a)(Object(o.a)({},e),{},{companies:t.companies});case L:return Object(o.a)(Object(o.a)({},e),{},{selectedCompany:t.selectedCompany});case G:return Object(o.a)(Object(o.a)({},e),{},{selectedCompanyName:t.selectedCompanyName});case z:return Object(o.a)(Object(o.a)({},e),{},{isCompanySelected:t.isCompanySelected});case J:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!e.isFetching});default:return e}},U=n(20),X=n(143),Q=n(145),Z=n(3),$=Object(H.a)({root:{listStyleType:"none"},card:{width:250,height:130,display:"flex",flexDirection:"column",textAlign:"center",margin:2,alignItems:"center",justifyContent:"center"},btn:{width:"90%",fontSize:12,marginTop:5}}),ee=function(e){var t=$(),n=Object(r.useState)(!1),a=Object(U.a)(n,2),c=a[0],s=a[1],i=function(){var t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.deleteClient(e.client.bindId);case 2:s(!0);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?null:Object(Z.jsx)("li",{className:t.root,children:Object(Z.jsx)(X.a,{className:t.card,children:Object(Z.jsxs)(Q.a,{children:[Object(Z.jsx)(P.a,{variant:"inherit",children:"\u0416\u0438\u043b\u0435\u0446 ".concat(e.client.name,",")}),Object(Z.jsx)(P.a,{variant:"inherit",children:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d ".concat(e.client.phone)}),Object(Z.jsx)(M.a,{className:t.btn,onClick:i,color:"secondary",variant:"contained",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"})]})})})},te=n(154),ne=Object(H.a)({clients:{display:"flex",flexDirection:"row",flexWrap:"wrap"},btn:{fontSize:12,margin:5},input:{width:140,margin:5}}),re=function(e){var t=ne(),n=[],a=Object(r.useState)(""),c=Object(U.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(""),o=Object(U.a)(u,2),p=o[0],d=o[1],b=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s,p),e.next=3,y.addClient({name:s,phone:p});case 3:t=e.sent,n.push({bindId:t.id,name:s,phone:p});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)("ul",{children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)(P.a,{children:"\u0416\u0438\u043b\u044c\u0446\u044b"}),Object(Z.jsx)("div",{className:t.clients,children:e.apartment.clients.length>0&&e.apartment.clients.map((function(t,n){return Object(Z.jsx)("div",{children:Object(Z.jsx)(ee,{client:t,apartment:e.apartment})},t.bindId)}))})]}),Object(Z.jsxs)("div",{className:t.inputs,children:[Object(Z.jsx)(te.a,{className:t.input,value:s,onInput:function(e){return i(e.target.value)},placeholder:"\u0438\u043c\u044f"}),Object(Z.jsx)(te.a,{className:t.input,onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},value:p,onInput:function(e){return d(String(e.target.value))},placeholder:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(Z.jsx)(M.a,{onClick:b,disabled:!s||!p,className:t.btn,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"})]})]})},ae=function(e){var t=Object(r.useState)(!1),n=Object(U.a)(t,2),a=n[0],c=n[1];return Object(Z.jsxs)("ul",{children:[Object(Z.jsxs)(M.a,{size:"small",variant:"outlined",style:{margin:"2px"},onClick:function(){c(!a)},children:["\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430 \u0441 ID ",e.apartment.addressId]}),a&&Object(Z.jsx)(re,{apartment:e.apartment})]})},ce=function(e){return console.log(e.apartments),e.apartments.map((function(e){return Object(Z.jsx)(ae,{apartment:e},e.addressId)}))},se=function(e){var t=Object(r.useState)(!1),n=Object(U.a)(t,2),a=n[0],c=n[1];return Object(Z.jsxs)("li",{children:[Object(Z.jsxs)(M.a,{size:"medium",variant:"outlined",onClick:function(){c(!a)},style:{margin:"2px"},children:["\u0414\u043e\u043c ",e.houseNumber]}),a&&e.streetHouses.map((function(e,t){return Object(Z.jsx)(ce,{apartments:Object.values(e)},t)}))]})},ie=function(e){return e.streetHousesKeys.map((function(t){return Object(Z.jsx)(se,{houseNumber:t,streetHouses:e.streetHouses},t)}))},ue=Object(H.a)({button:{margin:3}}),oe=function(e){var t=ue(),n=e.street,a=Object.keys(n.houses),c=Object(r.useState)(!1),s=Object(U.a)(c,2),i=s[0],u=s[1];return 0!==a.length&&Object(Z.jsxs)("div",{children:[Object(Z.jsx)(M.a,{variant:"outlined",className:t.button,onClick:function(){u(!i)},children:n.name}),Object(Z.jsx)("div",{children:i&&Object(Z.jsx)("div",{children:Object(Z.jsx)("ul",{children:Object(Z.jsx)(ie,{streetHousesKeys:a,streetHouses:Object.values(n.houses)})})})})]},n.id)},pe=function(e){var t=e.streets;return t&&t.map((function(e){return Object(Z.jsx)(oe,{street:e},e.id)}))},le=Object(H.a)({root:{height:"100%",maxWidth:"100%",paddingLeft:10}}),je=function(e){var t=Object(i.b)(),n=le(),a=e.selectedCompany,c=Object(i.c)((function(e){return e.apartmentsReducer.isStreetsFetching})),s=Object(i.c)((function(e){return e.apartmentsReducer.isStreetsFetched})),p=Object(i.c)((function(e){return e.apartmentsReducer.isApartmentsFetching})),d=Object(i.c)((function(e){return e.apartmentsReducer.apartments})),b=Object(i.c)((function(e){return e.apartmentsReducer.streets})),f=Object(i.c)((function(e){return e.companiesReducer.selectedCompanyName}));Object(r.useEffect)((function(){var e;s||t(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T(!0)),e.prev=1,e.next=4,g.getStreets();case 4:n=e.sent,t(F(n)),t({type:k,boolean:!0}),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0);case 12:return e.prev=12,t(T(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()),t((e=a,function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(A(!0)),t.prev=1,t.next=4,C.getApartments({companyId:e});case 4:r=t.sent,n(_(r)),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:return t.prev=11,n(A(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()))}),[]),b&&b.forEach((function(e){var t=d.filter((function(t){return t.streetId===e.id})),n={};t.forEach((function(e){n[e.houseId]=Object(o.a)(Object(o.a)({},n[e.houseId]),{},Object(u.a)({},e.addressId,e))})),e.houses=n}));var h=p||c;return Object(Z.jsxs)("div",{className:n.root,children:[Object(Z.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){return t(V(!1))},disabled:h,children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0432\u044b\u0431\u043e\u0440\u0443"}),Object(Z.jsxs)(P.a,{variant:"subtitle1",children:["\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f ",f]}),Object(Z.jsxs)(P.a,{variant:"subtitle2",children:[f," \u0438\u043c\u0435\u0435\u0442 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u043b\u0438\u0446\u0430\u0445: (\u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0447\u0442\u043e-\u0431\u044b \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u043e \u0432\u0441\u0435 \u0443\u043b\u0438\u0446\u044b, \u043c\u043d\u043e\u0433\u043e \u043f\u0443\u0441\u0442\u044b\u0445)"]}),h?Object(Z.jsx)(P.a,{variant:"subtitle1",children:"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."}):Object(Z.jsx)(pe,{streets:b})]})},de=n(150),be=n(156),fe=n(153),he=n(157),Oe=Object(H.a)({root:{margin:0,padding:0,width:"100%",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},formControl:{minWidth:250}}),me=function(e){var t=Object(i.b)(),n=Oe(),a=Object(i.c)((function(e){return e.companiesReducer.companies}));Object(r.useEffect)((function(){t(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(B()),e.prev=1,e.next=4,g.getManagementCompanies();case 4:n=e.sent,t(K(n)),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:return e.prev=11,t(B()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(Z.jsx)("div",{className:n.root,children:Object(Z.jsxs)(de.a,{className:n.formControl,children:[Object(Z.jsx)(be.a,{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),Object(Z.jsx)(fe.a,{onChange:function(e){return function(e){var n=e.id,r=e.name;t(W(n,r))}(e.target.value)},defaultValue:"",children:a&&a.map((function(e){return Object(Z.jsx)(he.a,{value:{id:e.id,name:e.name},children:e.name},e.id)}))})]})})},ve=n(74),xe=n(151),ge=n(152),ye=Object(ve.a)({palette:{type:"dark"},typography:{allVariants:{color:"white"}}}),Ce=Object(H.a)({root:{margin:0,padding:0,width:"100%",minHeight:"100vh"}}),we=function(){var e=Ce(),t=Object(i.c)((function(e){return e.companiesReducer.isCompanySelected})),n=Object(i.c)((function(e){return e.companiesReducer.selectedCompany}));return Object(Z.jsxs)(xe.a,{theme:ye,children:[Object(Z.jsx)(ge.a,{}),Object(Z.jsx)("div",{className:e.root,children:t?Object(Z.jsx)(je,{selectedCompany:n}):Object(Z.jsx)(me,{})})]})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Ee=n(51),Ne=n(73),ke=Object(Ee.b)({apartmentsReducer:R,companiesReducer:Y}),Ie=Object(Ee.c)(ke,Object(Ee.a)(Ne.a));window.store=Ie;var Te=Ie;s.a.render(Object(Z.jsx)(a.a.StrictMode,{children:Object(Z.jsx)(i.a,{store:Te,children:Object(Z.jsx)(we,{})})}),document.getElementById("root")),Se()}},[[111,1,2]]]);
//# sourceMappingURL=main.726f10ca.chunk.js.map